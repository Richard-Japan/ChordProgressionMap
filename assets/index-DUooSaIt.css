:root{--bg: #0b0b0e;--text: #f3f4f7;--text-muted: #c5c7d2;--border: rgba(255, 255, 255, .14);--hover-border: rgba(255, 255, 255, .24);--border-strong: #ff2d6f;--panel: rgba(12, 14, 20, .62);--panel-blur: 8px;--overlay: rgba(8, 10, 16, .74);--overlay-grad-1: rgba(40, 30, 80, .35);--overlay-grad-2: rgba(10, 18, 40, .35);--chip-bg: rgba(12, 14, 20, .55);--node-bg: linear-gradient(180deg, #0f0f14, #0d0d12);--shadow-lg: 0 20px 60px rgba(0, 0, 0, .55);--shadow-md: 0 8px 24px rgba(0, 0, 0, .45);--bg-image: url(/ChordProgressionMap/background.jpg);--now: rgba(16, 185, 129, .18);--accent: rgba(255, 45, 111, .16);--safe-top: env(safe-area-inset-top, 0px);--safe-bottom: env(safe-area-inset-bottom, 0px);--vh: 1vh}*{box-sizing:border-box;margin:0}html,body{height:100%}body{color:var(--text);font:15px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;-webkit-tap-highlight-color:transparent}body:before{content:"";position:fixed;inset:0;z-index:-2;background:var(--bg-image) center/cover no-repeat fixed;filter:saturate(1.05) contrast(1.05) brightness(.92);transform:scale(1.02)}body:after{content:"";position:fixed;inset:0;z-index:-1;background:radial-gradient(60% 40% at 20% 0%,var(--overlay-grad-1),transparent 60%),radial-gradient(80% 60% at 80% 100%,var(--overlay-grad-2),transparent 55%),linear-gradient(0deg,var(--overlay),var(--overlay))}.container{position:relative;z-index:0;max-width:1120px;margin:24px auto 84px;padding:24px 24px calc(84px + var(--safe-bottom));min-height:calc(var(--vh) * 100 - var(--safe-bottom))}.container:before{content:"";position:absolute;inset:0;z-index:-1;background:var(--panel);backdrop-filter:blur(var(--panel-blur)) saturate(1.05);-webkit-backdrop-filter:blur(var(--panel-blur)) saturate(1.05);border:1px solid rgba(255,255,255,.08);border-radius:18px;box-shadow:var(--shadow-lg) inset}.header{margin-bottom:12px;padding:2px 4px}.title{font-size:22px;font-weight:800;letter-spacing:.2px;color:var(--text)}.muted{color:var(--text-muted)}.appLayout{display:grid;grid-template-columns:280px 1fr;gap:18px;align-items:start}.sidebar,.mainContent .card,.playlistBar,.sectionsList,.pathBar{background:#12121a8c;border:1px solid rgba(255,255,255,.08);backdrop-filter:blur(8px) saturate(1.05);-webkit-backdrop-filter:blur(8px) saturate(1.05);border-radius:14px;box-shadow:var(--shadow-md)}.sidebar{margin-top:16px;position:sticky;top:16px;max-height:calc(100vh - 32px);overflow:auto}.topBar{position:sticky;top:0;z-index:10;display:flex;align-items:center;gap:14px;padding:12px 14px;margin:6px 0 12px;background:linear-gradient(180deg,#121217bf,#1212178c);border:1px solid rgba(255,255,255,.08);border-radius:12px;-webkit-backdrop-filter:blur(6px) saturate(1.15);backdrop-filter:blur(6px) saturate(1.15)}.topBarActions{display:flex;gap:10px}.spacer{flex:1}.controls{display:flex;gap:16px;flex-wrap:wrap;align-items:center}.controlGroup{display:flex;align-items:center;gap:8px}.label{font-size:12px;text-transform:uppercase;letter-spacing:.08em;opacity:.95}.select,.btn,.btnGhost,.btnPrimary,input[type=text]{height:38px;padding:0 10px;border-radius:10px;border:1px solid var(--border);background:#0f0f14;color:var(--text);font-size:14px;outline:none;transition:border-color .15s ease,box-shadow .15s ease,transform .05s ease;display:inline-flex;align-items:center}.select:hover,.btn:hover,.btnGhost:hover,.btnPrimary:hover,input[type=text]:hover{border-color:var(--hover-border)}.select:focus,button:focus,input[type=text]:focus{box-shadow:0 0 0 2px #ff2d6f59}.btn,.btnGhost,.btnPrimary{cursor:pointer}.btn:active,.btnGhost:active,.btnPrimary:active{transform:translateY(1px)}.btn:disabled,.btnGhost:disabled,.btnPrimary:disabled{opacity:.45;cursor:not-allowed}.btnGhost{background:#0f0f14}.btnPrimary{border-color:var(--border-strong);color:#ffd9e4;background:linear-gradient(180deg,#a72dff2e,#2408311a);box-shadow:0 0 0 1px #ff2d6f2e inset}.grid{display:grid;gap:22px;grid-template-columns:repeat(4,minmax(180px,1fr))}.colTitle{font-weight:800;color:#e7e7ef;margin-bottom:8px;font-size:14px}.colStack{display:flex;flex-direction:column;gap:10px}.node,.chip{background:var(--chip-bg);border:1px solid rgba(255,255,255,.08);color:var(--text);backdrop-filter:blur(6px) saturate(1.05);-webkit-backdrop-filter:blur(6px) saturate(1.05)}.node{width:100%;display:flex;align-items:center;justify-content:center;text-align:center;border-radius:16px;padding:clamp(12px,2.6vw,16px);font-size:clamp(18px,2.2vw,22px);font-weight:800;letter-spacing:.2px;background:var(--node-bg);box-shadow:inset 0 0 0 1px #ffffff05,0 10px 24px #00000059;transition:border-color .15s ease,background .05s ease,transform .05s ease}.node:hover{border-color:var(--hover-border);background:#12141c9e}.nodeActive{border-color:var(--border-strong);background:var(--accent);color:#fff2f6}.nodeNow{background:var(--now);border-color:#10b981}.pathBar{padding:10px 12px;margin:10px 0 14px}.pathRow{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.labelStrong{font-weight:800;color:#e7e7ef;letter-spacing:.02em}.chips{display:flex;gap:8px;flex-wrap:wrap}.chip{display:inline-flex;align-items:center;gap:6px;padding:9px 12px;border-radius:9999px;font-weight:800;min-height:40px;font-size:clamp(14px,1.8vw,16px)}.chipActive{border-color:var(--border-strong);background:var(--accent);color:#fff2f6}.chipFlash{animation:chipPulse .45s ease;box-shadow:0 0 0 2px #ff2d6f59}@keyframes chipPulse{0%{transform:scale(1)}50%{transform:scale(1.04)}to{transform:scale(1)}}.node[data-degree=I],.chip[data-degree=I],.node[data-degree=i],.chip[data-degree=i]{background:#00e5ff3d;border-color:#39ecff}.node[data-degree=ii],.chip[data-degree=ii],.node[data-degree=ii째],.chip[data-degree=ii째]{background:#7cff003d;border-color:#9bff3a}.node[data-degree=iii],.chip[data-degree=iii],.node[data-degree=III],.chip[data-degree=III]{background:#ffc4073d;border-color:#ffcf47}.node[data-degree=IV],.chip[data-degree=IV],.node[data-degree=iv],.chip[data-degree=iv]{background:#5b8cff3d;border-color:#7ca2ff}.node[data-degree=V],.chip[data-degree=V],.node[data-degree=v],.chip[data-degree=v]{background:#ff4d4f3d;border-color:#ff6e70}.node[data-degree=vi],.chip[data-degree=vi],.node[data-degree=VI],.chip[data-degree=VI]{background:#14b8a63d;border-color:#2fd2c1}.node[data-degree=vii째],.chip[data-degree=vii째],.node[data-degree=VII],.chip[data-degree=VII]{background:#b36bff3d;border-color:#c395ff}.playlistBar{padding:12px}.playlistHeader{display:flex;align-items:center;height:32px;margin-bottom:6px}.playlistRow{display:flex;align-items:center;gap:8px;margin-bottom:10px}.inputStretch{flex:1;min-width:0}.listReset{list-style:none;padding:0;margin:0}.playlistItem{padding:10px 12px;margin-bottom:8px;display:flex;align-items:center;gap:8px}.btnGhost.danger{border-color:#ff4d4f66}.btnGhost.danger:hover{border-color:#ff4d4f}.sectionsMiniHeader{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.sectionsMiniAdd{display:flex;align-items:center;gap:8px}.sectionsMiniWrap{display:grid;grid-template-columns:1fr;gap:8px}.sectionsMiniItem{padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#0c0e1480}.sectionsMiniItemActive{border-color:var(--border-strong);box-shadow:0 0 0 1px #ff2d6f2e inset}.sectionsMiniChip{width:100%;text-align:left;display:grid;grid-template-columns:auto 1fr;gap:6px;align-items:center;background:transparent;border:none;color:var(--text-muted);cursor:pointer;padding:0;margin:0 0 6px}.sectionsMiniName{font-weight:800;letter-spacing:.02em;white-space:nowrap;color:var(--text)}.sectionsMiniSeq{font-size:12px;color:var(--text);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sectionsMiniActions{display:flex;gap:6px;justify-content:flex-end}.sectionsTitle{padding:6px}.sectionsPresets{margin:0 10px}.drawer{position:fixed;inset:0 auto 0 0;width:min(380px,90vw);transform:translate(-100%);transition:transform .16s ease;background:#0f1018eb;border-right:1px solid var(--border);z-index:200;backdrop-filter:blur(10px) saturate(1.1);-webkit-backdrop-filter:blur(10px) saturate(1.1);padding:12px;overflow:auto}.drawerOpen{transform:translate(0)}.drawerHeader{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}.drawerBackdrop{position:fixed;inset:0;z-index:150;background:#0006}.allChordsBar{padding:10px 12px;margin:8px 0 14px;top:56px;z-index:40}.allChordsWrap{display:grid;grid-template-columns:repeat(7,minmax(90px,1fr));gap:10px}@media (max-width: 900px){.allChordsWrap{grid-template-columns:repeat(4,minmax(90px,1fr))}}@media (max-width: 600px){.allChordsWrap{grid-template-columns:repeat(3,minmax(90px,1fr))}}.nodeSm{padding:10px 12px;border-radius:12px;display:grid;grid-template-columns:1fr auto;align-items:baseline;gap:6px}.nodeSm .nodeMain{font-weight:800;letter-spacing:.2px}.nodeSm .nodeSub{font-size:12px;color:var(--text-muted)}.topBarMobile{position:sticky;top:0;z-index:60;display:none;align-items:center;justify-content:space-between;gap:8px;padding:10px 12px;background:#0a0c12b3;-webkit-backdrop-filter:blur(6px) saturate(1.1);backdrop-filter:blur(6px) saturate(1.1);border-bottom:1px solid var(--border)}.iconBtn{width:36px;height:36px;display:inline-flex;align-items:center;justify-content:center;border-radius:10px;border:1px solid var(--border);background:#0c0e1480;color:var(--text);font-size:18px}.titleXS{color:var(--text);font-weight:800}@media (max-width: 820px){.topBarMobile{display:flex}.appLayout{position:relative}.sidebar{position:fixed;inset:0 auto 0 0;width:min(84vw,320px);transform:translate(-100%);transition:transform .2s ease;z-index:70;background:#0c0e14bf;-webkit-backdrop-filter:blur(8px) saturate(1.1);backdrop-filter:blur(8px) saturate(1.1);border-right:1px solid var(--border);padding:12px}.sidebar[data-open=true]{transform:translate(0)}.mainContent{padding-top:8px}.topBar{margin-top:8px}}.collapseBtn{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:10px;border:1px solid var(--border);background:#0c0e1473;color:var(--text)}.collapseIcon{display:inline-block;transition:transform .16s ease}.collapseIcon.open{transform:rotate(90deg)}.collapseBody{overflow:hidden;max-height:0;transition:max-height .18s ease,opacity .18s ease;opacity:0}.collapseBody.isOpen{max-height:520px;opacity:1}.playlistBar{padding:10px 12px}.playlistItem{padding:8px 10px;border:1px solid var(--border);border-radius:12px;background:#0c0e1473}.playlistItem+.playlistItem{margin-top:8px}.sectionsMini .btnGhost.sm,.playlistBar .btnGhost,.playlistBar .btnPrimary{height:34px}.pathBar,.allChordsBar{margin-top:8px}.grid{gap:18px}:root{--s-1: 4px;--s0: 8px;--s1: 12px;--s2: 16px;--s3: 20px;--s4: 24px;--s5: 32px;--radius: 14px;--stick-top: 8px;--stick-1: 52px;--stick-gap: 8px}.container{max-width:1200px;padding:var(--s3) var(--s3) calc(var(--s5) + env(safe-area-inset-bottom,0px));margin:var(--s4) auto var(--s5);position:relative}.appLayout{grid-template-columns:280px 1fr;gap:var(--s3)}@media (max-width: 960px){.appLayout{grid-template-columns:1fr}}.sidebar{top:var(--s2);max-height:calc(100vh - var(--s4));display:flex;flex-direction:column;gap:var(--s2)}.card{border-radius:var(--radius);padding:var(--s2) var(--s3);margin:0}.topBar,.pathBar,.sectionsStrip,.allChordsBar{margin:var(--s2) 0}.topBar{position:sticky;top:var(--stick-top);z-index:30}.allChordsBar{top:calc(var(--stick-top) + var(--stick-1) + var(--stick-gap));z-index:25}.topBarActions{gap:var(--s1)}.controls{gap:var(--s2)}.grid{grid-template-columns:repeat(4,minmax(200px,1fr));gap:var(--s3);align-items:start}@media (max-width: 1100px){.grid{grid-template-columns:repeat(3,minmax(180px,1fr))}}@media (max-width: 820px){.grid{grid-template-columns:repeat(2,minmax(160px,1fr))}}@media (max-width: 560px){.grid{grid-template-columns:1fr}}.labelStrong,.colTitle,.sectionsHeader,.playlistHeader,.sectionRow{display:flex;align-items:center}.select,.btn,.btnGhost,.btnPrimary,.chip{height:36px;display:inline-flex;align-items:center;border-radius:10px}.chips{gap:var(--s1)}.chip{padding:6px 12px}.playlistBar{padding:var(--s2)}.playlistHeader{gap:var(--s1)}.playlistRow{gap:var(--s1);margin-bottom:var(--s1)}.listReset{padding:0;margin:0;list-style:none}.playlistItem{gap:var(--s1);padding:8px 10px;border-radius:12px;border:1px solid var(--border);background:#0c0e1473}.playlistName{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sectionsMini{padding:var(--s2)}.sectionsMiniWrap{grid-template-columns:1fr;gap:var(--s1)}.header{margin-bottom:var(--s1)}.title{line-height:1.2}@media (max-width: 820px){.topBarMobile{display:flex}.sidebar{position:fixed;inset:0 auto 0 0;width:min(84vw,320px);transform:translate(-100%);transition:transform .2s ease;z-index:70;background:#0c0e14c7;-webkit-backdrop-filter:blur(8px) saturate(1.1);backdrop-filter:blur(8px) saturate(1.1);border-right:1px solid var(--border);padding:var(--s2)}.sidebar[data-open=true]{transform:translate(0)}.mainContent{padding-top:var(--s0)}}.node{min-height:52px;padding:12px 16px;font-size:clamp(16px,2.5vw,18px);border-radius:var(--radius)}.sectionsMini,.sectionsList{padding:12px}.sectionsPresets{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.btnGhost.sm{height:30px;padding:0 10px;font-size:12px}.sectionsAddRow{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center;margin:20px 0}.sectionsAddRow .inputStretch{min-width:0}.sectionsAddRow .btnAdd{white-space:nowrap}.sectionsMiniItem{padding:8px;border-radius:12px;border:1px solid var(--border);background:#0c0e1480}.sectionsMiniItemActive{border-color:var(--border-strong);box-shadow:0 0 0 1px #ff2d6f26 inset}.select,.btn,.btnGhost,.btnPrimary,.chip{height:36px;display:inline-flex;align-items:center}.next2 .node,.next2 .chip{opacity:.5;filter:saturate(.5)}.next3 .node,.next3 .chip{opacity:.3;filter:saturate(.3)}.grid>.next2 .node{opacity:.5;filter:saturate(.5)}.grid>.next3 .node{opacity:.3;filter:saturate(.3)}@keyframes nextGlow{0%{box-shadow:none;filter:brightness(1) saturate(1)}30%{box-shadow:0 0 0 4px #7d2dff33,0 10px 32px #842dff2e;filter:brightness(1.12) saturate(1.04)}to{box-shadow:none;filter:brightness(1) saturate(1)}}.next1.pulse .node{animation:nextGlow .42s ease}@keyframes columnPulse{0%{box-shadow:none;filter:brightness(1) saturate(1)}25%{box-shadow:0 0 0 6px #2d49ff2e,0 12px 40px #5a2dff29;filter:brightness(1.08) saturate(1.04)}to{box-shadow:none;filter:brightness(1) saturate(1)}}.next1{position:relative}.next1.pulse{animation:columnPulse .9s ease}.next1.pulse .node{filter:brightness(1.05) saturate(1.03)}.next1.pulse .colTitle:after{position:absolute;right:8px;top:50%;transform:translateY(-50%);font-weight:800;font-size:12px;color:#ffd9e4;background:#2d81ff2e;border:1px solid rgba(45,48,255,.4);padding:4px 8px;border-radius:9999px;animation:hintFloat 1.2s ease-in-out}@media (max-width: 820px){.allChordsBar{position:static!important;top:auto!important;z-index:auto!important}.pathBar{position:sticky;top:calc(var(--stick-top) + var(--stick-1) + var(--stick-gap));z-index:26}}
